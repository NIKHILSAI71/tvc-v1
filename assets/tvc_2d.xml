<!--
  MJCF model describing a planar thrust-vector-controlled launch vehicle used for
  research on MPC and reinforcement learning controllers. The model keeps the
  vehicle confined to the X-Z plane while allowing planar translation and pitch
  rotation. The gimballed engine is represented as a lightweight body with two
  actuated slider joints that reposition the nozzle beneath the vehicle to
  emulate a two-axis TVC carriage.
-->
<mujoco model="tvc_2d">
  <compiler angle="radian" inertiafromgeom="true"/>
  <option timestep="0.002" gravity="0 0 -9.81"/>

  <default>
    <joint armature="0.0" damping="0.2" limited="true"/>
    <geom density="1200" friction="0.6 0.1 0.1" rgba="0.8 0.8 0.9 1.0"/>
    <motor gear="1" ctrlrange="-1 1"/>
  </default>

  <asset>
    <texture name="sky" type="skybox" builtin="gradient" rgb1="0.05 0.1 0.2" rgb2="0.3 0.4 0.6" width="512" height="512"/>
    <material name="rocket" texture="sky" reflectance="0.2"/>
  </asset>

  <worldbody>
    <body name="ground" pos="0 0 0">
      <geom name="pad" type="plane" size="40 40 1" rgba="0.4 0.4 0.45 1" material="rocket"/>
    </body>

    <body name="vehicle" pos="0 0 3">
      <freejoint name="vehicle_free"/>
      <!-- Keep motion planar using soft stabilisation instead of invalid tendon attributes. -->
      <geom name="hull" type="capsule" fromto="0 0 -1.5 0 0 1.5" size="0.3" material="rocket" />
      <geom name="tank" type="ellipsoid" pos="0 0 0.8" size="0.35 0.35 0.6" rgba="0.9 0.9 0.95 1" />
      <site name="vehicle_cg" pos="0 0 0" size="0.05" rgba="0.9 0.4 0.4 1"/>

      <body name="tvc_mount" pos="0 0 -1.6">
        <joint name="tvc_x" type="slide" axis="1 0 0" range="-0.35 0.35" damping="15"/>
        <joint name="tvc_y" type="slide" axis="0 1 0" range="-0.35 0.35" damping="15"/>
        <geom name="mount" type="box" size="0.08 0.08 0.12" rgba="0.6 0.6 0.7 1"/>

        <body name="nozzle" pos="0 0 -0.1">
          <joint name="nozzle_pitch" type="hinge" axis="1 0 0" range="-0.2 0.2" damping="2" frictionloss="0.01"/>
          <geom name="nozzle_geom" type="capsule" fromto="0 0 0 0 0 -0.8" size="0.05" rgba="0.2 0.2 0.25 1"/>
          <site name="thrust_site" pos="0 0 -0.7" size="0.02" rgba="0.9 0.3 0.3 1"/>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <motor name="thrust" joint="nozzle_pitch" gear="150" ctrlrange="-1 1"/>
    <motor name="cart_x" joint="tvc_x" gear="1" ctrlrange="-1 1"/>
    <motor name="cart_y" joint="tvc_y" gear="1" ctrlrange="-1 1"/>
  </actuator>

  <sensor>
    <accelerometer name="imu_acc" site="vehicle_cg"/>
    <gyro name="imu_gyro" site="vehicle_cg"/>
    <jointpos name="tvc_cart" joint="tvc_x"/>
    <jointpos name="tvc_cart_y" joint="tvc_y"/>
  </sensor>

</mujoco>
